chrome.runtime.onMessage.addListener((function(n,e,t){if(console.log("Received message:",n),"showTranscript"===n.action){const n=TranscriptFetcher.getVideoId(window.location.href);if(!n)return void alert("No video ID found. Make sure you are on a YouTube video page.");let e=document.getElementById("extension-transcript-container");e||(e=document.createElement("div"),e.id="extension-transcript-container",e.style.cssText="\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          width: 300px;\n          max-height: 80vh;\n          background: white;\n          border: 1px solid #ccc;\n          border-radius: 8px;\n          padding: 15px;\n          overflow-y: auto;\n          z-index: 9999;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        ",document.body.appendChild(e)),e.innerHTML="<p>Loading transcript...</p>",TranscriptFetcher.fetchTranscript(n).then((n=>{if(!n||!n.length)return void(e.innerHTML="<p>No transcript available for this video.</p>");const t=n.map((n=>`<p style="margin-bottom: 10px;">\n              <span style="color: #666;">${function(n){const e=new Date(1e3*n),t=e.getUTCMinutes(),o=e.getUTCSeconds();return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}(n.start)}</span><br>\n              ${n.text}\n            </p>`)).join("");e.innerHTML=`\n            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">\n              <h3 style="margin: 0;">Video Transcript</h3>\n              <button onclick="this.parentElement.parentElement.remove()" style="border: none; background: none; cursor: pointer;">âœ•</button>\n            </div>\n            <div>${t}</div>\n          `})).catch((n=>{e.innerHTML=`\n            <p>Error fetching transcript: ${n.message}</p>\n            <p>Note: You need to set up a RapidAPI key in the extension settings.</p>\n          `}))}}));