chrome.runtime.onMessage.addListener((function(n,e,t){return console.log("Message received in content script:",n),"showTranscript"===n.action&&async function(){try{let n=document.getElementById("extension-transcript-container");n||(n=document.createElement("div"),n.id="extension-transcript-container",n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        width: 300px;\n        max-height: 80vh;\n        background: white;\n        border: 1px solid #ccc;\n        border-radius: 8px;\n        padding: 15px;\n        overflow-y: auto;\n        z-index: 9999;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n      ",document.body.appendChild(n)),n.innerHTML="<p>Loading transcript...</p>";const e=window.TranscriptFetcher.getVideoId(window.location.href);if(!e)return void(n.innerHTML="<p>No video ID found. Make sure you are on a YouTube video page.</p>");const t=await window.TranscriptFetcher.fetchTranscript(e);if(!t||0===t.length)return void(n.innerHTML="<p>No transcript available for this video.</p>");const r=t.map((n=>`<p style="margin-bottom: 10px;">\n        <span style="color: #666;">${function(n){const e=new Date(1e3*n),t=e.getUTCMinutes(),r=e.getUTCSeconds();return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}(n.offset/1e3)}</span><br>\n        ${n.text}\n      </p>`)).join("");n.innerHTML=`\n      <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">\n        <h3 style="margin: 0;">Video Transcript</h3>\n        <button onclick="this.parentElement.parentElement.remove()" \n                style="border: none; background: none; cursor: pointer;">âœ•</button>\n      </div>\n      <div>${r}</div>\n    `}catch(n){console.error("Error handling transcript request:",n);const e=document.getElementById("extension-transcript-container");e&&(e.innerHTML=`<p>Error fetching transcript: ${n.message}</p>`)}}(),!0}));